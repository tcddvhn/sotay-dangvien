<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>S·ªï tay Nghi·ªáp v·ª• C√¥ng t√°c T·ªï ch·ª©c ƒê·∫£ng</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#cc0000">
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Flag_of_the_Communist_Party_of_Vietnam.svg/1200px-Flag_of_the_Communist_Party_of_Vietnam.svg.png">

    <style>
        /* CSS CHUNG */
        :root { --primary: #cc0000; --primary-dark: #a30000; --text: #333; --sidebar-bg: #2c3e50; --header-h: 50px; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: var(--text); margin: 0; background: #f4f4f4; }
        
        /* HEADER MOBILE */
        .mobile-header { display: none; position: fixed; top: 0; left: 0; right: 0; height: var(--header-h); background: var(--primary); color: white; align-items: center; padding: 0 15px; z-index: 2000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .menu-btn { background: none; border: none; color: white; font-size: 24px; cursor: pointer; margin-right: 15px; }
        .app-title { font-weight: bold; text-transform: uppercase; font-size: 1rem; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
        @media (max-width: 992px) { .mobile-header { display: flex; } }

        /* SIDEBAR */
        .sidebar { width: 280px; background: var(--sidebar-bg); color: white; padding: 20px; position: fixed; top: 0; bottom: 0; left: 0; overflow-y: auto; z-index: 3000; transition: transform 0.3s ease; box-shadow: 2px 0 5px rgba(0,0,0,0.1); }
        @media (max-width: 992px) { .sidebar { transform: translateX(-100%); width: 85%; max-width: 320px; } .sidebar.active { transform: translateX(0); } }
        .sidebar h3 { border-bottom: 1px solid #555; padding-bottom: 15px; margin-top: 0; color: #f1c40f; text-align: center; }
        .nav-list { list-style: none; padding: 0; }
        .nav-link { display: block; padding: 12px 15px; color: #ecf0f1; text-decoration: none; border-bottom: 1px solid rgba(255,255,255,0.05); transition:0.2s; }
        .nav-link:hover { background: var(--primary); padding-left: 20px; }
        .overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2500; display: none; backdrop-filter: blur(2px); }
        .overlay.active { display: block; }

        /* MAIN CONTENT */
        .main { padding: 20px; background: white; min-height: 100vh; transition: margin-left 0.3s; }
        @media (min-width: 992px) { .main { margin-left: 280px; padding: 40px 60px; } }
        @media (max-width: 992px) { .main { padding-top: 70px; } }

        h1 { color: var(--primary); border-bottom: 3px solid var(--primary); padding-bottom: 15px; margin-top: 0; font-size: 1.6rem; text-transform: uppercase; }
        .phan-header { background: #fcebeb; padding: 15px; border-left: 6px solid var(--primary); margin-top: 30px; color: var(--primary-dark); font-size: 1.3em; font-weight: bold; }
        .muc-header { color: #b71c1c; margin-top: 25px; font-weight: 700; font-size: 1.1em; }

        /* STEP BOX & TABLE */
        .step-box { background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 3px 6px rgba(0,0,0,0.05); }
        .tag-label { font-size: 0.75rem; text-transform: uppercase; color: #666; font-weight: bold; display: block; margin-bottom: 5px; }
        .step-title { font-weight: bold; color: var(--primary); margin-bottom: 10px; display: block; font-size: 1.05rem; }
        .btn-detail { display: inline-flex; align-items: center; justify-content: center; margin-top: 15px; background: #e3f2fd; color: #0d47a1; padding: 10px 20px; border-radius: 6px; border: 1px solid #90caf9; font-weight: bold; cursor: pointer; width: 100%; text-decoration:none; }
        @media (min-width: 768px) { .btn-detail { width: auto; } }

        .data-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.9rem; border: 1px solid #ddd; }
        .data-table th, .data-table td { border: 1px solid #ddd; padding: 10px; text-align: left; vertical-align: top; }
        .data-table th { background-color: #f2f2f2; color: var(--primary-dark); font-weight: bold; text-align: center; }
        .data-table tr:nth-child(even) { background-color: #fafafa; }
        .data-table tr:hover { background-color: #f1f1f1; }

        /* MODAL */
        .modal { display: none; position: fixed; z-index: 4000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); align-items: center; justify-content: center; padding: 10px; }
        .modal-box { background: white; width: 100%; max-width: 800px; border-radius: 10px; overflow: hidden; max-height: 90vh; display: flex; flex-direction: column; animation: slideUp 0.3s; }
        .modal-head { background: var(--primary); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .modal-body { padding: 20px; overflow-y: auto; line-height: 1.6; text-align: justify; }
        @keyframes slideUp { from {transform: translateY(20px); opacity:0} to {transform: translateY(0); opacity:1} }

        /* ADMIN */
        #adminPanel { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 5000; flex-direction: column; }
        @media (min-width: 768px) { #adminPanel { flex-direction: row; } }
        .admin-sidebar { background: #f8f9fa; border-bottom: 1px solid #ddd; padding: 10px; display: flex; flex-direction: column; }
        @media (min-width: 768px) { .admin-sidebar { width: 300px; height: 100vh; border-right: 1px solid #ddd; border-bottom: none; } }
        .admin-main { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
        .form-control { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; }
        .btn { padding: 10px 15px; border: none; border-radius: 4px; color: white; cursor: pointer; font-weight: bold; margin-bottom: 5px; }
        .btn-save { background: #28a745; } .btn-close { background: #6c757d; } .btn-del { background: #dc3545; } .btn-add { background: #007bff; }
        
        #backToTop { display: none; position: fixed; bottom: 20px; right: 20px; z-index: 90; border: none; background: var(--primary); color: white; padding: 12px; border-radius: 50%; cursor: pointer; }
    </style>
</head>
<body>

    <div class="mobile-header">
        <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
        <span class="app-title">S·ªî TAY NGHI·ªÜP V·ª§</span>
    </div>

    <div class="overlay" onclick="toggleMenu()"></div>
    <div class="sidebar" id="sidebar">
        <div style="text-align:right"><span onclick="toggleMenu()" style="cursor:pointer; font-size:1.5rem; padding:5px;">‚úï</span></div>
        <h3>M·ª§C L·ª§C</h3>
        <ul class="nav-list" id="menuList"></ul>
        <div style="margin-top:30px; text-align:center; font-size:0.8rem; color:#999; border-top:1px solid #444; padding-top:20px;">
            <p>&copy; 2025 Ban T·ªï ch·ª©c Th√†nh ·ªßy</p>
            <span onclick="checkAdmin()" style="cursor:pointer; opacity:0.5">üîí Qu·∫£n tr·ªã h·ªá th·ªëng</span>
        </div>
    </div>

    <div class="main">
        <h1>H∆Ø·ªöNG D·∫™N NGHI·ªÜP V·ª§ C√îNG T√ÅC ƒê·∫¢NG VI√äN (2025)</h1>
        <p><i>(CƒÉn c·ª© H∆∞·ªõng d·∫´n s·ªë 10-HD/BTCTU c·ªßa Ban T·ªï ch·ª©c Th√†nh ·ªßy H√† N·ªôi)</i></p>
        <div id="dynamicContent"></div>
        <br><br><br>
    </div>

    <div id="popup" class="modal" onclick="closePopup(event)">
        <div class="modal-box">
            <div class="modal-head">
                <span>N·ªôi dung chi ti·∫øt</span>
                <span onclick="document.getElementById('popup').style.display='none'" style="cursor:pointer; font-size:1.2rem">‚úï</span>
            </div>
            <div class="modal-body" id="popupContent"></div>
        </div>
    </div>

    <button id="backToTop" onclick="window.scrollTo({top:0, behavior:'smooth'})">‚¨Ü</button>

    <div id="adminPanel">
        <div class="admin-sidebar">
            <div style="font-weight:bold; margin-bottom:10px">C·∫§U TR√öC S·ªî TAY</div>
            <button class="btn btn-add" onclick="addNewRoot()">+ Th√™m Ph·∫ßn L·ªõn</button>
            <div id="adminTree" style="flex:1; overflow-y:auto; margin-top:10px; border:1px solid #eee; background:white;"></div>
        </div>
        <div class="admin-main">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px; border-bottom:1px solid #eee; padding-bottom:10px">
                <h2 style="margin:0">Bi√™n t·∫≠p n·ªôi dung</h2>
                <div>
                    <button class="btn btn-save" onclick="downloadHTML()">üíæ L∆ØU & T·∫¢I FILE</button>
                    <button class="btn btn-close" onclick="document.getElementById('adminPanel').style.display='none'">ƒê√≥ng</button>
                </div>
            </div>
            <div id="editorArea" style="display:none">
                <div style="text-align:right"><button class="btn btn-del" onclick="deleteItem()">X√≥a m·ª•c n√†y</button></div>
                <label>Lo·∫°i (Tag):</label><input type="text" id="inpTag" class="form-control" placeholder="VD: Quy tr√¨nh, H∆∞·ªõng d·∫´n...">
                <label>Ti√™u ƒë·ªÅ:</label><input type="text" id="inpTitle" class="form-control">
                <label>N·ªôi dung hi·ªÉn th·ªã (T√≥m t·∫Øt):</label><textarea id="inpSummary" class="form-control" rows="5"></textarea>
                <label>N·ªôi dung chi ti·∫øt (Popup/B·∫£ng bi·ªÉu):</label><p style="font-size:0.8rem; color:#666; margin:0"><i>D√°n m√£ HTML b·∫£ng v√†o ƒë√¢y.</i></p><textarea id="inpDetail" class="form-control" rows="8"></textarea>
                <div style="margin-top:15px; border-top:1px dashed #ccc; padding-top:15px"><button class="btn btn-add" style="background:#17a2b8" onclick="addSubItem()">+ Th√™m m·ª•c con</button></div>
            </div>
            <div id="editorPlaceholder" style="text-align:center; color:#999; margin-top:50px">Ch·ªçn m·ªôt m·ª•c b√™n tr√°i ƒë·ªÉ s·ª≠a</div>
        </div>
    </div>

    <script>
        // --- D·ªÆ LI·ªÜU BAN ƒê·∫¶U ---
        const initialData = [
            {
                id: 'p1', title: 'PH·∫¶N I: K·∫æT N·∫†P ƒê·∫¢NG VI√äN', tag: '', summary: '', detail: '', level: 0,
                children: [
                    {
                        id: 'p1_1', title: 'I. Ti√™u chu·∫©n, ƒëi·ªÅu ki·ªán', tag: 'Quy ƒë·ªãnh', level: 1,
                        summary: 'Quy ƒë·ªãnh chi ti·∫øt v·ªÅ tu·ªïi ƒë·ªùi (18-60), tr√¨nh ƒë·ªô h·ªçc v·∫•n v√† ƒëi·ªÅu ki·ªán k·∫øt n·∫°p l·∫°i.', 
                        detail: '<p><b>1. V·ªÅ tu·ªïi ƒë·ªùi:</b><br>- T·ª´ 18 ƒë·∫øn 60 tu·ªïi.<br>- Tr√™n 60 tu·ªïi: Do c·∫•p ·ªßy tr·ª±c thu·ªôc Th√†nh ·ªßy xem x√©t.<br><b>2. Tr√¨nh ƒë·ªô h·ªçc v·∫•n:</b><br>- Y√™u c·∫ßu: T·ªët nghi·ªáp THCS tr·ªü l√™n.</p>'
                    }
                ]
            },
            {
                id: 'p3', title: 'PH·∫¶N III: C√ÅC BI·ªÇU M·∫™U & KHUNG TI√äU CH√ç', tag: '', summary: '', detail: '', level: 0,
                children: [
                    {
                        id: 'p3_1', title: 'Danh m·ª•c c√°c M·∫´u t√†i li·ªáu', tag: 'Tra c·ª©u', level: 1,
                        summary: 'B·∫•m xem B·∫£ng t·ªïng h·ª£p c√°c bi·ªÉu m·∫´u nghi·ªáp v·ª•.',
                        detail: `
                        <h3 style="text-align:center; color:#b71c1c;">DANH M·ª§C C√ÅC M·∫™U T√ÄI LI·ªÜU</h3>
                        <table class="data-table">
                            <thead><tr><th>K√Ω hi·ªáu</th><th>T√™n m·∫´u</th><th>Ghi ch√∫</th></tr></thead>
                            <tbody>
                                <tr style="background:#ffebee"><td colspan="3"><b>A. K·∫æT N·∫†P ƒê·∫¢NG</b></td></tr>
                                <tr><td>1-KNƒê</td><td>ƒê∆°n xin v√†o ƒê·∫£ng</td><td></td></tr>
                                <tr><td>2-KNƒê</td><td>L√Ω l·ªãch ng∆∞·ªùi xin v√†o ƒê·∫£ng</td><td></td></tr>
                            </tbody>
                        </table>
                        `
                    },
                    {
                        id: 'p3_2', title: 'Khung ti√™u ch√≠ ƒë√°nh gi√° L√£nh ƒë·∫°o', tag: 'Ph·ª• l·ª•c 2', level: 1,
                        summary: 'Khung ti√™u ch√≠ ƒë√°nh gi√° c√° nh√¢n gi·ªØ ch·ª©c v·ª• l√£nh ƒë·∫°o.',
                        detail: `
                        <h3 style="text-align:center; color:#b71c1c;">PH·ª§ L·ª§C 2: KHUNG TI√äU CH√ç</h3>
                        <table class="data-table">
                            <thead><tr><th>STT</th><th>Ch·ª©c danh</th><th>Bi·ªÉu s·ªë</th></tr></thead>
                            <tbody>
                                <tr><td>1</td><td>Ph√≥ Ch·ªß t·ªãch HƒêND Th√†nh ph·ªë</td><td>Bi·ªÉu 01</td></tr>
                                <tr><td>2</td><td>Ph√≥ Ch·ªß t·ªãch UBND Th√†nh ph·ªë</td><td>Bi·ªÉu 02</td></tr>
                            </tbody>
                        </table>
                        `
                    }
                ]
            }
        ];

        let APP_DATA = initialData;
        // ∆Øu ti√™n l·∫•y d·ªØ li·ªáu t·ª´ LocalStorage n·∫øu c√≥
        try {
            const stored = localStorage.getItem('SOTAY_DATA_FINAL');
            if(stored) APP_DATA = JSON.parse(stored);
        } catch(e) {}
        
        let currentEditNode = null;

        // --- RENDER UI ---
        function renderUI() {
            const menu = document.getElementById('menuList');
            const content = document.getElementById('dynamicContent');
            menu.innerHTML = ''; content.innerHTML = '';

            function processNode(items) {
                items.forEach(item => {
                    if(item.level < 2) {
                        let li = document.createElement('li');
                        let indent = item.level === 1 ? '&nbsp;&nbsp;üìÇ ' : '';
                        li.innerHTML = `<a href="#${item.id}" onclick="toggleMenu(false)" class="nav-link">${indent}${item.title}</a>`;
                        menu.appendChild(li);
                    }
                    let div = document.createElement('div');
                    div.id = item.id;
                    if(item.level === 0) {
                        div.innerHTML = `<div class="phan-header">${item.title}</div>`;
                    } else if (item.level === 1) {
                        div.innerHTML = `<div class="muc-header">${item.title}</div>`;
                        if(item.summary) div.innerHTML += `<p>${item.summary.replace(/\n/g, '<br>')}</p>`;
                    } else {
                        let tagHtml = item.tag ? `<span class="tag-label">${item.tag}</span>` : '';
                        let btnHtml = (item.detail && item.detail.trim() !== "") ? 
                            `<a class="btn-detail" onclick="openPopup('${item.id}')">üìñ Xem chi ti·∫øt / Bi·ªÉu m·∫´u</a>` : '';
                        div.className = 'step-box';
                        div.innerHTML = `${tagHtml}<span class="step-title">${item.title}</span><div style="font-size:0.95rem">${item.summary.replace(/\n/g, '<br>')}</div>${btnHtml}`;
                    }
                    content.appendChild(div);
                    if(item.children) processNode(item.children);
                });
            }
            processNode(APP_DATA);
        }

        // --- HELPER FUNCTIONS ---
        function toggleMenu(forceState) {
            const sb = document.getElementById('sidebar');
            const ov = document.querySelector('.overlay');
            if(typeof forceState !== 'undefined') {
                if(forceState) { sb.classList.add('active'); ov.classList.add('active'); }
                else { sb.classList.remove('active'); ov.classList.remove('active'); }
            } else { sb.classList.toggle('active'); ov.classList.toggle('active'); }
        }
        function findNodeRecursive(id, nodes) {
            for(let node of nodes) {
                if(node.id === id) return node;
                if(node.children) { let found = findNodeRecursive(id, node.children); if(found) return found; }
            } return null;
        }
        function openPopup(id) {
            const item = findNodeRecursive(id, APP_DATA);
            if(item) { document.getElementById('popupContent').innerHTML = item.detail; document.getElementById('popup').style.display = 'flex'; }
        }
        function closePopup(e) { if(e.target.id === 'popup') document.getElementById('popup').style.display='none'; }
        window.onscroll = function() { document.getElementById("backToTop").style.display = (window.scrollY > 300) ? "block" : "none"; };

        // --- ADMIN LOGIC ---
        function checkAdmin() {
            let p = prompt("M·∫≠t kh·∫©u:");
            if(p === "btctuhn@123") { document.getElementById('adminPanel').style.display = 'flex'; renderAdminTree(); } 
            else if (p !== null) { alert("Sai m·∫≠t kh·∫©u!"); }
        }

        function renderAdminTree() {
            const container = document.getElementById('adminTree');
            container.innerHTML = '';
            function buildHtml(nodes) {
                let html = '';
                nodes.forEach(node => {
                    let active = (currentEditNode && currentEditNode.id === node.id) ? 'background:#e3f2fd; color:#007bff; font-weight:bold;' : '';
                    let icon = node.level === 0 ? 'üìö' : (node.level === 1 ? 'üìÇ' : 'üìÑ');
                    let padding = node.level * 20 + 10;
                    html += `<div style="padding:10px; padding-left:${padding}px; border-bottom:1px solid #eee; cursor:pointer; ${active}" onclick="selectItem('${node.id}')">${icon} ${node.title}</div>`;
                    if(node.children) html += buildHtml(node.children);
                });
                return html;
            }
            container.innerHTML = buildHtml(APP_DATA);
        }

        function selectItem(id) {
            currentEditNode = findNodeRecursive(id, APP_DATA);
            renderAdminTree();
            document.getElementById('editorPlaceholder').style.display = 'none';
            document.getElementById('editorArea').style.display = 'block';
            document.getElementById('inpTag').value = currentEditNode.tag || '';
            document.getElementById('inpTitle').value = currentEditNode.title || '';
            document.getElementById('inpSummary').value = currentEditNode.summary || '';
            document.getElementById('inpDetail').value = currentEditNode.detail || '';
        }

        ['inpTag', 'inpTitle', 'inpSummary', 'inpDetail'].forEach(fid => {
            document.getElementById(fid).addEventListener('input', function() {
                if(!currentEditNode) return;
                let prop = fid.replace('inp','').toLowerCase();
                if(prop === 'tag') currentEditNode.tag = this.value;
                if(prop === 'title') currentEditNode.title = this.value;
                if(prop === 'summary') currentEditNode.summary = this.value;
                if(prop === 'detail') currentEditNode.detail = this.value;
                if(prop === 'title') renderAdminTree();
            });
        });

        function addNewRoot() { APP_DATA.push({id: 'r'+Date.now(), title:'PH·∫¶N M·ªöI', tag:'', summary:'', detail:'', level:0, children:[]}); renderAdminTree(); }
        function addSubItem() { 
            if(!currentEditNode) return; 
            if(!currentEditNode.children) currentEditNode.children = [];
            currentEditNode.children.push({id: 'n'+Date.now(), title:'M·ª•c m·ªõi', tag:'', summary:'', detail:'', level: currentEditNode.level+1, children:[]});
            renderAdminTree(); 
        }
        function findParent(id, nodes) {
            for(let node of nodes) {
                if(node.children && node.children.some(c => c.id === id)) return node;
                let f = findParent(id, node.children || []); if(f) return f;
            } return null;
        }
        function deleteItem() {
            if(!currentEditNode || !confirm('X√≥a m·ª•c n√†y?')) return;
            let p = findParent(currentEditNode.id, APP_DATA);
            if(p) { let idx = p.children.findIndex(c=>c.id === currentEditNode.id); p.children.splice(idx,1); }
            else { let idx = APP_DATA.findIndex(c=>c.id === currentEditNode.id); APP_DATA.splice(idx,1); }
            currentEditNode = null; document.getElementById('editorArea').style.display='none'; renderAdminTree();
        }

        // ============================================================
        // T√çNH NƒÇNG M·ªöI: T·ª∞ ƒê·ªòNG T·∫†O V√Ä T·∫¢I FILE INDEX.HTML
        // ============================================================
        function downloadHTML() {
            // 1. L∆∞u l·∫°i v√†o LocalStorage
            try { localStorage.setItem('SOTAY_DATA_FINAL', JSON.stringify(APP_DATA)); } catch(e){}
            renderUI(); // V·∫Ω l·∫°i giao di·ªán ƒë·ªÉ ƒë·∫£m b·∫£o m·ªõi nh·∫•t

            // 2. Chu·∫©n b·ªã d·ªØ li·ªáu JSON
            const jsonString = JSON.stringify(APP_DATA, null, 4);

            // 3. L·∫•y to√†n b·ªô m√£ ngu·ªìn hi·ªán t·∫°i c·ªßa trang
            let htmlContent = document.documentElement.outerHTML;

            // 4. L√ÄM S·∫†CH: X√≥a c√°c n·ªôi dung sinh ra b·ªüi JS ƒë·ªÉ tr√°nh tr√πng l·∫∑p khi m·ªü file m·ªõi
            // Ch√∫ng ta d√πng DOMParser ƒë·ªÉ thao t√°c an to√†n tr√™n chu·ªói HTML
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlContent, 'text/html');

            // X√≥a n·ªôi dung trong c√°c container ƒë·ªông
            doc.getElementById('menuList').innerHTML = '';
            doc.getElementById('dynamicContent').innerHTML = '';
            doc.getElementById('adminTree').innerHTML = '';
            
            // ƒê·∫£m b·∫£o Admin v√† Popup ƒëang ƒë√≥ng
            doc.getElementById('adminPanel').style.display = 'none';
            doc.getElementById('popup').style.display = 'none';

            // 5. THAY TH·∫æ D·ªÆ LI·ªÜU C≈® B·∫∞NG D·ªÆ LI·ªÜU M·ªöI (QUAN TR·ªåNG NH·∫§T)
            // T√¨m ƒëo·∫°n "const initialData = [ ... ];" v√† thay b·∫±ng d·ªØ li·ªáu m·ªõi
            let cleanHTML = "<!DOCTYPE html>\n" + doc.documentElement.outerHTML;
            
            // S·ª≠ d·ª•ng Regex ƒë·ªÉ thay th·∫ø bi·∫øn initialData
            const regex = /const initialData = \[[\s\S]*?\];/;
            const newScript = `const initialData = ${jsonString};`;
            
            cleanHTML = cleanHTML.replace(regex, newScript);

            // 6. T·∫£i file v·ªÅ
            const blob = new Blob([cleanHTML], {type: 'text/html'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'index.html';
            a.click();
            
            alert("‚úÖ ƒê√£ t·∫°o file 'index.html' m·ªõi!\n\nB·∫°n h√£y l·∫•y file n√†y trong th∆∞ m·ª•c T·∫£i xu·ªëng (Downloads) v√† √∫p l√™n GitHub.");
        }

        // Start App
        renderUI();
    </script>
</body>
</html>